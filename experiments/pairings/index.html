<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">

		<link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png">
		<link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png">
		<link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png">
		<link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png">
		<link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png">
		<link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png">
		<link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png">
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png">
		<link rel="icon" type="image/png" sizes="192x192"  href="/android-icon-192x192.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
		<link rel="shortcut icon" href="/favicon.ico">
		<link rel="manifest" href="/manifest.json">
		<meta name="msapplication-TileColor" content="#ffffff">
		<meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
		<meta name="theme-color" content="#2ecc71">

		<link rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
			integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
			crossorigin="anonymous">

		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107754281-2"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			gtag('config', 'UA-107754281-2');
		</script>

		<title>Debate Pairings</title>
	</head>

	<body>
		<div id="app" class="container">
			<div class="row">
				<div class="col">
					<br>
					<h1>Pairing Generator</h1>
				</div>
			</div>

			<div class="row">
				<div class="col">
					<label for="debaters">Debaters:</label>
				</div>
			</div>
			
			<div class="row">
				<div class="col-lg-9">
					<textarea
						class="form-control form-control-sm"
						id="debaters"
						rows="10"
						placeholder="Enter debaters - use newline to indicate each debater..."
						v-model="rawDebaters"></textarea>
				</div>
				<div class="text-lg-right col-lg-3">
					<button class="btn btn-primary mb-2" @click.prevent="generate(-1)">Generate 1v1's</button>
					<br>
					<button class="btn btn-primary mb-2" @click.prevent="generate(0)" @contextmenu.prevent="generateR(0)">Generate 2v2's</button>
					<br>
					<button class="btn btn-primary mb-2" @click.prevent="generate(1)" @contextmenu.prevent="generateR(1)">Generate 2v2's + Judges</button>
					<br>
					<button class="btn btn-primary mb-2" @click.prevent="generate(2)">Generate 3v3's</button>
				</div>
			</div>

			<hr>

			<template v-if="pairings.length !== 0">
				<div class="row">
					<div class="col">
						<h2>Result</h2>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<template v-if="type === -1" v-for="(debater, index) in pairings">
							<p v-if="index % 2 === 0 && pairings.length - index > 1">
								<b>Debate:</b>
								{{ debater }} VS {{ pairings[index + 1] }}
							</p>
							<template v-if="index % 2 === 0 && pairings.length - index < 2">
								<p>
									<b>Extra:</b>
									{{ debater }}
								</p>
							</template>
						</template>

						<template v-if="type === 0" v-for="(debater, index) in pairings">
							<p v-if="index % 4 === 0 && pairings.length - index > 3">
								<b>Debate:</b>
								{{ debater }} + {{ pairings[index + 1] }} VS {{ pairings[index + 2] }} + {{ pairings[index + 3] }}
							</p>
							<template v-if="index % 4 === 0 && pairings.length - index < 4">
								<p>
									<b>Extras:</b>
									<template v-for="(d2, i2) in pairings">
										<template v-if="i2 >= index">
											{{ d2 + (i2 === pairings.length - 1 ? "" : ", ") }}
										</template>
									</template>
								</p>
							</template>
						</template>

						<template v-if="type === 1" v-for="(debater, index) in pairings">
							<p v-if="index % 5 === 0 && pairings.length - index > 4">
								<b>Debate:</b>
								{{ debater }} + {{ pairings[index + 1] }} VS {{ pairings[index + 2] }} + {{ pairings[index + 3] }}
								<br> <b>Judge: {{ pairings[index + 4] }}</b>
							</p>
							<template v-if="index % 5 === 0 && pairings.length - index < 5">
								<p>
									<b>Extras:</b>
									<template v-for="(d2, i2) in pairings">
										<template v-if="i2 >= index">
											{{ d2 + (i2 === pairings.length - 1 ? "" : ", ") }}
										</template>
									</template>
								</p>
							</template>
						</template>

						<template v-if="type === 2" v-for="(debater, index) in pairings">
							<p v-if="index % 6 === 0 && pairings.length - index > 5">
								<b>Debate:</b>
								{{ debater }} + {{ pairings[index + 1] }} + {{ pairings[index + 2] }} VS
								{{ pairings[index + 3] }} + {{ pairings[index + 4] }} + {{ pairings[index + 5] }}
							</p>
							<template v-if="index % 6 === 0 && pairings.length - index < 6">
								<p>
									<b>Extras:</b>
									<template v-for="(d2, i2) in pairings">
										<template v-if="i2 >= index">
											{{ d2 + (i2 === pairings.length - 1 ? "" : ", ") }}
										</template>
									</template>
								</p>
							</template>
						</template>
					</div>
				</div>
			</template>
		</div>

		<script src="/global/vue.min.js"></script>
		<script src="./script.js"></script>
	</body>
</html>